<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Distance Calculator</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            max-width: 500px;
            margin: auto;
        }
        input {
            width: 100%;
            padding: 8px;
            margin: 5px 0;
        }
        button {
            padding: 10px;
            width: 100%;
            margin: 10px 0;
            cursor: pointer;
        }
        #result {
            margin-top: 20px;
            font-weight: bold;
            word-break: break-word;
        }
    </style>
</head>
<body>

    <h2>Distance Between Two Points on Earth</h2>

    <label>Point A Latitude:</label>
    <input type="number" id="lat1" step="any" placeholder="Enter latitude">
    <label>Point A Longitude:</label>
    <input type="number" id="lon1" step="any" placeholder="Enter longitude">

    <label>Point B Latitude:</label>
    <input type="number" id="lat2" step="any" placeholder="Enter latitude">
    <label>Point B Longitude:</label>
    <input type="number" id="lon2" step="any" placeholder="Enter longitude">

    <button onclick="calculateDistance()">Calculate Distance</button>
    <button onclick="getUserLocation()">Use My Location as Point A</button>

    <div id="result"></div>

    <script>
    function toRadians(degrees) {
        return degrees * Math.PI / 180;
    }

    function calculateDistance() {
        const lat1 = parseFloat(document.getElementById('lat1').value);
        const lon1 = parseFloat(document.getElementById('lon1').value);
        const lat2 = parseFloat(document.getElementById('lat2').value);
        const lon2 = parseFloat(document.getElementById('lon2').value);

        if ([lat1, lon1, lat2, lon2].some(isNaN)) {
            alert('Please enter all coordinates.');
            return;
        }

        // Earth radius in meters (more precise)
        const R = 6371008.8;

        const φ1 = toRadians(lat1);
        const φ2 = toRadians(lat2);
        const Δφ = toRadians(lat2 - lat1);
        const Δλ = toRadians(lon2 - lon1);

        const a =
            Math.sin(Δφ / 2) ** 2 +
            Math.cos(φ1) * Math.cos(φ2) *
            Math.sin(Δλ / 2) ** 2;

        const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
        const distance = R * c;

        document.getElementById('result').textContent =
            `Distance: ${distance.toFixed(3)} meters`;
    }

    function getUserLocation() {
        if (!navigator.geolocation) {
            alert('Geolocation is not supported by your browser.');
            return;
        }

        navigator.geolocation.getCurrentPosition(
            (position) => {
                const { latitude, longitude, accuracy } = position.coords;

                document.getElementById('lat1').value = latitude;
                document.getElementById('lon1').value = longitude;

                document.getElementById('result').textContent =
                    `Point A set. Device reported accuracy: ±${accuracy.toFixed(2)} meters`;
            },
            (error) => {
                alert('Unable to retrieve your location. Enable GPS and try outdoors.');
            },
            {
                enableHighAccuracy: true,
                timeout: 15000,
                maximumAge: 0
            }
        );
    }
</script>


</body>
</html>
